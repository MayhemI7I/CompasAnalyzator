# 📦 Пакетный анализ - Руководство

## Обновлено: 28.10.2025, 14:20

---

## ✨ Новые возможности

### 1. **Фильтры по статусу** 🔍

**Доступные фильтры:**
- **Все результаты** - показать все компасы
- **✓ Только успешные** - показать только валидные
- **✗ Только с ошибками** - показать только проблемные

**Использование:**
```
1. Выполните пакетный анализ
2. В панели фильтров выберите "Только с ошибками"
3. Увидите только компасы с проблемами
4. Можно быстро проверить их детали (👁️)
```

---

### 2. **Сортировка результатов** 📊

**Доступные варианты сортировки:**

| Вариант | Описание |
|---------|----------|
| **По имени (А-Я)** | Сортировка по номеру компаса (возрастание) |
| **По имени (Я-А)** | Сортировка по номеру компаса (убывание) |
| **Успешные первые** | Сначала ✓, потом ✗ |
| **Ошибки первые** | Сначала ✗, потом ✓ |
| **Больше поворотов** | От 4 к 0 |
| **Меньше поворотов** | От 0 к 4 |

**Примеры использования:**

```
Найти все проблемные компасы:
→ Статус: "Только с ошибками"
→ Сортировка: "Меньше поворотов"
→ Компасы с 0-3 поворотами сверху

Проверить лучшие:
→ Статус: "Только успешные"
→ Сортировка: "Больше поворотов"
→ Компасы с 4 поворотами сверху
```

---

### 3. **Расширенная статистика** 📈

**Показатели:**
- ✓ **X успешно** - количество валидных компасов
- ✗ **Y с ошибками** - количество проблемных
- 📊 **Z всего** - общее количество проанализированных

**Таблица:**
```
# | Компас | Статус  | Повороты | Измерений | Действия
1 | 1903   | ✓       | 4/4      | 123       | 👁️
2 | 1904   | ✓       | 4/4      | 115       | 👁️
3 | 1905   | ✗       | 3/4      | 98        | 👁️
```

---

### 4. **Экспорт результатов** 💾

**Две кнопки экспорта:**

**A. "Экспорт всех"** - в панели фильтров
- Экспортирует ВСЕ результаты пакетного анализа
- Формат: JSON
- Имя файла: `batch_analysis_[timestamp].json`

**B. "Экспортировать"** - в модальном окне детального просмотра
- Экспортирует данные конкретного компаса
- Формат: JSON
- Имя файла: `[номер_компаса]_analysis_[timestamp].json`

---

## 🎯 Практические сценарии

### Сценарий 1: Быстрая проверка партии

```
Задача: Проверить 50 компасов, найти проблемные

Действия:
1. Вкладка "Пакетный анализ"
2. Ввести: H:\Study\Успешно
3. Нажать "Запустить анализ"
4. Дождаться завершения

Результат:
✓ 47 успешно | ✗ 3 с ошибками | 📊 50 всего

Фильтрация:
5. Статус: "Только с ошибками"
6. Видим только 3 проблемных
7. Кликаем 👁️ на каждом
8. Изучаем детали

Время: ~5-10 секунд на 50 компасов!
```

---

### Сценарий 2: Поиск компасов с минимальными поворотами

```
Задача: Найти компасы с неполной калибровкой

Действия:
1. Выполнить пакетный анализ
2. Сортировка: "Меньше поворотов"
3. Посмотреть топ списка

Результат:
Компасы с 0, 1, 2, 3 поворотами наверху
→ Быстро выявить проблемы
→ Экспортировать список для отчета
```

---

### Сценарий 3: Экспорт отчета по партии

```
Задача: Создать отчет по проверенной партии

Действия:
1. Выполнить пакетный анализ папки
2. Проверить результаты
3. Нажать "Экспорт всех"
4. Сохранить JSON файл

Результат:
Файл batch_analysis_1698489600000.json содержит:
- Все компасы
- Полные данные каждого
- Можно открыть в Excel/анализаторе
```

---

### Сценарий 4: Комбинированная фильтрация

```
Пример 1: Только успешные по имени
→ Статус: "Только успешные"
→ Сортировка: "По имени (А-Я)"
→ Результат: Отсортированный список валидных компасов

Пример 2: Проблемные с максимальными поворотами
→ Статус: "Только с ошибками"
→ Сортировка: "Больше поворотов"
→ Результат: Компасы с ошибками, но с 3 поворотами (почти прошли)
```

---

## 🔍 Детальный просмотр

**После фильтрации и сортировки:**

```
Нажмите 👁️ на любой строке
→ Откроется модальное окно с:
   - 📊 График (с выделением зоны поворотов 🔵)
   - 📋 Таблица последовательности поворотов
   - 📝 Полный детальный лог анализа
   - 💾 Кнопка экспорта этого компаса
```

---

## 📊 Интерфейс

```
╔══════════════════════════════════════════════════════════════╗
║                   ПАКЕТНЫЙ АНАЛИЗ                            ║
╠══════════════════════════════════════════════════════════════╣
║ Директория: [H:\Study\Успех            ] [Запустить анализ] ║
╠══════════════════════════════════════════════════════════════╣
║                                                              ║
║  ✓ 47 успешно  |  ✗ 3 с ошибками  |  📊 50 всего           ║
║                                                              ║
║ ┌─ Фильтры ───────────────────────────────────────────────┐ ║
║ │ Статус: [Все результаты ▼]                              │ ║
║ │ Сортировка: [По имени (А-Я) ▼]                          │ ║
║ │ [Сбросить] [Экспорт всех]                               │ ║
║ └──────────────────────────────────────────────────────────┘ ║
║                                                              ║
║ # │ Компас │ Статус  │ Повороты │ Измерений │ Действия    ║
║ 1 │ 1903   │ ✓       │ 4/4      │ 123       │ 👁️          ║
║ 2 │ 1904   │ ✓       │ 4/4      │ 115       │ 👁️          ║
║ 3 │ 1905   │ ✗       │ 3/4      │ 98        │ 👁️          ║
╚══════════════════════════════════════════════════════════════╝
```

---

## 💡 Подсказки

### Быстрый поиск проблем:
```
Статус: "Только с ошибками"
→ Сразу видно все проблемные компасы
```

### Проверка качества партии:
```
Сортировка: "Успешные первые"
→ Оценить общее качество
→ Успешные сверху, ошибки внизу
```

### Детальная диагностика:
```
1. Отфильтровать нужные
2. Отсортировать удобным образом
3. Кликать 👁️ по каждому
4. Изучать графики и логи
```

### Создание отчета:
```
1. Применить нужные фильтры
2. Нажать "Экспорт всех"
3. Получить JSON со всеми данными
4. Обработать внешним инструментом
```

---

## 🔄 Обновление результатов

**Новый анализ той же папки:**
```
1. Измените фильтры/сортировку
2. Введите путь заново
3. Нажмите "Запустить анализ"
4. Новые результаты заменят старые
5. Старые остаются в истории!
```

---

## 📁 Сравнение с Историей

| Функция | Пакетный анализ | История |
|---------|-----------------|---------|
| **Фильтр по статусу** | ✅ Да | ✅ Да |
| **Фильтр по дате** | ❌ Нет | ✅ Да |
| **Сортировка** | ✅ 6 вариантов | ❌ Нет |
| **Группировка по дням** | ❌ Нет | ✅ Да |
| **Детальный просмотр** | ✅ Да | ✅ Да |
| **Экспорт всех** | ✅ Да | ❌ Нет |
| **Живое обновление** | ✅ Да | ✅ Да |

---

## ✅ Что реализовано

1. ✅ Фильтры по статусу (все/успешные/ошибки)
2. ✅ Сортировка (6 вариантов)
3. ✅ Кнопка "Сбросить" фильтры
4. ✅ Кнопка "Экспорт всех" результатов
5. ✅ Обновленная таблица с колонкой "Измерений"
6. ✅ Счетчик "всего" в статистике
7. ✅ Нумерация строк (#)
8. ✅ Переименована вкладка на "Пакетный анализ"

---

## 🚀 Готово к использованию!

**Обновите страницу в браузере:**
```
Ctrl+F5 (жесткое обновление)
```

**Протестируйте:**
```
1. Вкладка "Пакетный анализ" (обновленное название!)
2. Введите: H:\Study\Успех
3. Нажмите "Запустить анализ"
4. Используйте фильтры и сортировку
5. Экспортируйте результаты
```

---

**Автор**: Ульянов Александр  
**Версия**: 2.1.1 - Batch Filters Edition  
**Дата**: 28 октября 2025, 14:20

